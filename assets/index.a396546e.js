import{R as e,r as t,D as a,n as s,f as l,b as r,E as n,F as c,S as m,G as i,H as o,I as u,J as p}from"./index.43ee1ebf.js";import{L as E}from"./index.0a9bf4c3.js";import{f as d,_ as h,m as f}from"./music.b374e1f6.js";import{L as g}from"./LeftOutline.81613f0c.js";var N=e.memo((s=>{const l=t.exports.useRef(),[r,n]=t.exports.useState(""),{newQuery:c}=s,{handleQuery:m}=s,i=r?{display:"block"}:{display:"none"};t.exports.useEffect((()=>{l.current.focus()}),[]);const o=t.exports.useMemo((()=>a(m,500)),[m]);t.exports.useEffect((()=>{o(r)}),[r]),t.exports.useEffect((()=>{c!==r&&n(c)}),[c]);return e.createElement("div",{className:"SearchBoxWrapper"},e.createElement("div",{className:"icon-back",onClick:()=>s.back()},e.createElement(g,null)),e.createElement("input",{ref:l,className:"box",placeholder:"搜索歌曲、歌手、专辑",value:r,onChange:e=>{n(e.currentTarget.value)}}),e.createElement("i",{className:"iconfont icon-delete",onClick:()=>{n(""),l.current.focus()},style:i},""))}));var v=t.exports.memo((function(){const{hotList:a,suggestList:g,enterLoading:v,songsList:x}=s((e=>e.search)),y=l(),b=r(),[k,S]=t.exports.useState(!1),[L,w]=t.exports.useState("");t.exports.useEffect((()=>{S(!0),a.length||y(n())}),[]);const C=t.exports.useCallback((()=>{S(!1)}),[]);return e.createElement(c,{in:k,timeout:300,appear:!0,classNames:"fly",unmountOnExit:!0,onExited:()=>b(-1)},e.createElement("div",{className:"Container"},e.createElement("div",{className:"search_box_wrapper"},e.createElement(N,{back:C,newQuery:L,handleQuery:e=>{w(e),e&&(y(o(!0)),y(u(e)))}})),e.createElement("div",{className:"ShortcutWrapper",style:{display:""+(L?"none":"")}},e.createElement(m,null,e.createElement("div",null,e.createElement("div",{className:"HotKey"},e.createElement("h1",{className:"title"},"热门搜索"),(()=>{const t=a||[];return e.createElement("ul",null,t.map((t=>e.createElement("li",{className:"item",key:t.first,onClick:()=>w(t.first)},e.createElement("span",null,t.first)))))})())))),e.createElement("div",{className:"ShortcutWrapper",style:{display:""+(L?"":"none")}},e.createElement(m,{onScroll:d},e.createElement("div",null,(()=>{const t=g.artists;if(t&&t.length)return e.createElement("div",{className:"SearchList"},e.createElement("h1",{className:"title"},"相关歌手"),t.map(((t,a)=>e.createElement("div",{className:"SearchListItem",key:t.accountId+""+a,onClick:()=>b(`/singers/${t.id}`)},e.createElement("div",{className:"img_wrapper"},e.createElement(h,{placeholder:e.createElement("img",{width:"100%",height:"100%",src:"/lu-music/assets/singer.a215b051.png",alt:"singer"})},e.createElement("img",{src:t.picUrl,width:"100%",height:"100%",alt:"music"}))),e.createElement("span",{className:"name"},"歌手: ",t.name)))))})(),(()=>{const t=g.playlists;if(t&&t.length)return e.createElement("div",{className:"SearchList"},e.createElement("h1",{className:"title"},"相关歌单"),t.map(((t,a)=>e.createElement("div",{className:"SearchListItem",key:t.accountId+""+a,onClick:()=>b(`/album/${t.id}`)},e.createElement("div",{className:"img_wrapper"},e.createElement(h,{placeholder:e.createElement("img",{width:"100%",height:"100%",src:f,alt:"music"})},e.createElement("img",{src:t.coverImgUrl,width:"100%",height:"100%",alt:"music"}))),e.createElement("span",{className:"name"},"歌单: ",t.name)))))})(),e.createElement("div",{className:"SearchSongItem",style:{paddingLeft:"20px"}},x.map((t=>e.createElement("li",{key:t.id,onClick:e=>{return a=Number(t.id),void y(p(a));var a}},e.createElement("div",{className:"info"},e.createElement("span",null,t.name),e.createElement("span",null,i(t.artists)," - ",t.album.name))))))))),v?e.createElement(E,null):null))}));export{v as default};
//# sourceMappingURL=index.a396546e.js.map
