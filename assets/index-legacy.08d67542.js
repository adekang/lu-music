!function(){function e(e,t,r,n,a,i,o){try{var c=e[i](o),l=c.value}catch(u){return void r(u)}c.done?t(l):Promise.resolve(l).then(n,a)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?t(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,c=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(l){c=!0,a=l}finally{try{o||null==r.return||r.return()}finally{if(c)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var c=document.createElement("style");c.innerHTML=".adm-tabs{--title-font-size: 17px;--content-padding: 12px;--active-line-height: 2px;--active-line-border-radius: var(--active-line-height);position:relative}.adm-tabs-header{position:relative;border-bottom:solid 1px var(--adm-border-color)}.adm-tabs-tab-list{display:flex;flex-wrap:nowrap;justify-content:flex-start;align-items:center;position:relative;overflow-x:scroll;scrollbar-width:none}.adm-tabs-tab-list::-webkit-scrollbar{display:none}.adm-tabs-tab-wrapper{padding:0 12px}.adm-tabs-tab-wrapper-stretch{flex:auto}.adm-tabs-tab{white-space:nowrap;padding:8px 0 10px;width:-webkit-min-content;width:-moz-min-content;width:min-content;margin:0 auto;font-size:var(--title-font-size);position:relative;cursor:pointer}.adm-tabs-tab-active{color:var(--adm-color-primary)}.adm-tabs-tab-disabled{opacity:.5;cursor:not-allowed}.adm-tabs-tab-line{position:absolute;bottom:0;height:var(--active-line-height);color:var(--adm-color-primary);background:var(--adm-color-primary);border-radius:var(--active-line-border-radius)}.adm-tabs-content{padding:var(--content-padding)}.adm-tabs-header-mask{position:absolute;top:0;bottom:0;z-index:1;width:30px;height:100%;pointer-events:none}.adm-tabs-header-mask-left{left:0;background:linear-gradient(to right,#fff,rgba(255,255,255,0))}.adm-tabs-header-mask-right{right:0;background:linear-gradient(to left,#fff,rgba(255,255,255,0))}.userInfoWrapper{position:fixed;top:0;left:0;right:0;bottom:0;z-index:1;overflow:hidden;background:#f2f3f4}.userInfoContainer{margin-top:14.933333vw;display:flex;flex-direction:column}.userInfoHeader{margin:0 auto;display:flex;align-items:center}.userInfoHeader>h1{padding-left:4vw}.userTab{margin:4.8vw 0;width:100%}.collectionList{position:fixed;top:48vw;left:0;bottom:0;width:100%;overflow:hidden}.collectionListItem{display:flex;align-items:center;padding:2.133333vw 2.133333vw 0}.collectionListItem .img_wrapper{height:0;width:45px;padding-bottom:45px}.collectionListItem p{padding-left:4.266667vw;display:-webkit-box;overflow:hidden;-webkit-line-clamp:1;-webkit-box-orient:vertical}\n",document.head.appendChild(c),System.register(["./index-legacy.3ccd7e09.js","./index-legacy.1cd718c9.js","./index-legacy.52564aad.js","./bound-legacy.3338ae7b.js","./music-legacy.7df90039.js","./LeftOutline-legacy.13214667.js"],(function(t){"use strict";var i,c,l,u,s,f,d,m,p,v,h,b,y,g,w,x,E,k,O,S,T,L,I,N,j,C,M,R,W,A,P,_,z,D,U;return{setters:[function(e){i=e.r,c=e._,l=e.X,u=e.Y,s=e.Z,f=e.m,d=e.R,m=e.u,p=e.w,v=e.a,h=e.c,b=e.$,y=e.f,g=e.b,w=e.n,x=e.a0,E=e.a1,k=e.T,O=e.V,S=e.a2,T=e.a3,L=e.a4,I=e.S,N=e.J},function(e){j=e.H},function(e){C=e.a,M=e.b,R=e.u,W=e.d,A=e.I},function(e){P=e.b,_=e.a},function(e){z=e._,D=e.m,U=e.f},function(){}],execute:function(){function H(e){var t=i.exports.useRef(e);t.current=i.exports.useMemo((function(){return e}),[e]);var r=i.exports.useRef();return r.current||(r.current=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.current.apply(this,e)}),r.current}var $=globalThis&&globalThis.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},V=function(){var e=$(i.exports.useState({}),2)[1];return i.exports.useCallback((function(){return e({})}),[])},F=c,K=/\s/;var J=function(e){for(var t=e.length;t--&&K.test(e.charAt(t)););return t},X=J,Y=/^\s+/;var Z=l,q=u;var B=function(e){return e?e.slice(0,X(e)+1).replace(Y,""):e},G=s,Q=function(e){return"symbol"==o(e)||q(e)&&"[object Symbol]"==Z(e)},ee=/^[-+]0x[0-9a-f]+$/i,te=/^0b[01]+$/i,re=/^0o[0-7]+$/i,ne=parseInt;var ae=s,ie=function(){return F.Date.now()},oe=function(e){if("number"==typeof e)return e;if(Q(e))return NaN;if(G(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=G(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=B(e);var r=te.test(e);return r||re.test(e)?ne(e.slice(2),r?2:8):ee.test(e)?NaN:+e},ce=Math.max,le=Math.min;var ue=function(e,t,r){var n,a,i,o,c,l,u=0,s=!1,f=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function m(t){var r=n,i=a;return n=a=void 0,u=t,o=e.apply(i,r)}function p(e){return u=e,c=setTimeout(h,t),s?m(e):o}function v(e){var r=e-l;return void 0===l||r>=t||r<0||f&&e-u>=i}function h(){var e=ie();if(v(e))return b(e);c=setTimeout(h,function(e){var r=t-(e-l);return f?le(r,i-(e-u)):r}(e))}function b(e){return c=void 0,d&&n?m(e):(n=a=void 0,o)}function y(){var e=ie(),r=v(e);if(n=arguments,a=this,l=e,r){if(void 0===c)return p(l);if(f)return clearTimeout(c),c=setTimeout(h,t),m(l)}return void 0===c&&(c=setTimeout(h,t)),o}return t=oe(t)||0,ae(r)&&(s=!!r.leading,i=(f="maxWait"in r)?ce(oe(r.maxWait)||0,t):i,d="trailing"in r?!!r.trailing:d),y.cancel=function(){void 0!==c&&clearTimeout(c),u=0,n=l=a=c=void 0},y.flush=function(){return void 0===c?o:b(ie())},y},se=ue,fe=s;var de=function(e,t,r){var n=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return fe(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),se(e,t,{leading:n,maxWait:t,trailing:a})},me=globalThis&&globalThis.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},pe=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(me(arguments[t]));return e};var ve="adm-tabs",he={activeLineMode:"auto",stretch:!0},be=_((function(e){var t,r=f(he,e),o=i.exports.useRef(null),c=i.exports.useRef(null),l={},u=null,s=[];d.Children.forEach(r.children,(function(e,t){if(d.isValidElement(e)){var r=e.key;if("string"==typeof r){0===t&&(u=r);var n=s.push(e);l[r]=n-1}}}));var y,g,w=a(function(e){var t=e.value,r=e.defaultValue,n=e.onChange,a=V(),o=i.exports.useRef(void 0!==t?t:r);void 0!==t&&(o.current=t);var c=H((function(e){void 0===t&&(o.current=e,a()),null==n||n(e)}));return[o.current,c]}({value:r.activeKey,defaultValue:null!==(t=r.defaultActiveKey)&&void 0!==t?t:u,onChange:function(e){var t;null!==e&&(null===(t=r.onChange)||void 0===t||t.call(r,e))}}),2),x=w[0],E=w[1],k=a(m((function(){return{x:0,width:0,config:{tension:300,clamp:!0}}})),2),O=k[0],S=O.x,T=O.width,L=k[1],I=a(m((function(){return{scrollLeft:0,config:{tension:300,clamp:!0}}})),2),N=I[0].scrollLeft,j=I[1],A=a(m((function(){return{leftMaskOpacity:0,rightMaskOpacity:0,config:{clamp:!0}}})),2),_=A[0],z=_.leftMaskOpacity,D=_.rightMaskOpacity,U=A[1];function $(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o.current;if(t){var n=l[x];if(void 0!==n){var a=c.current;if(a){var i=t.children.item(n+1),u=i.children.item(0),s=u.offsetLeft,f=u.offsetWidth,d=i.offsetLeft,m=i.offsetWidth,p=t.offsetWidth,v=t.scrollWidth,h=t.scrollLeft,b=a.offsetWidth,y=0,g=0;"auto"===r.activeLineMode?(y=s,g=f):"full"===r.activeLineMode?(y=d,g=m):y=s+(f-b)/2,L.start({x:y,width:g,immediate:e});var w=v-p;if(!(w<=0)){var E=P(s-(p-f)/2,0,v-p);j.start({scrollLeft:E,from:{scrollLeft:h},immediate:e})}}}else L.start({x:0,width:0,immediate:!0})}}R((function(){$(!S.isAnimating)}),[]),W((function(){$()}),[x]),y=o,g=H((function(){$(!S.isAnimating)})),R((function(){var e=y.current;if(e){if(window.ResizeObserver){var t=new ResizeObserver((function(){g(e)}));return t.observe(e),function(){t.disconnect()}}g(e)}}),[y]),function(e,t,r){var n=H(e);i.exports.useEffect((function(){var e=new MutationObserver((function(){n()}));if(t.current)return e.observe(t.current,r),function(){e.disconnect()}}),[t])}((function(){$(!S.isAnimating)}),o,{subtree:!0,childList:!0,characterData:!0});var F=function(e,t){var r,n=C(e),a=null!==(r=null==t?void 0:t.wait)&&void 0!==r?r:1e3,o=i.exports.useMemo((function(){return de((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.current.apply(n,pe(e))}),a,t)}),[]);return M((function(){o.cancel()})),{run:o,cancel:o.cancel,flush:o.flush}}((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=o.current;if(t){var r=t.scrollLeft,n=r>0,a=r+t.offsetWidth<t.scrollWidth;U.start({leftMaskOpacity:n?1:0,rightMaskOpacity:a?1:0,immediate:e})}}),{wait:100,trailing:!0,leading:!0}),K=F.run;return R((function(){K(!0)}),[]),p(r,d.createElement("div",{className:ve},d.createElement("div",{className:"".concat(ve,"-header")},d.createElement(v.div,{className:h("".concat(ve,"-header-mask"),"".concat(ve,"-header-mask-left")),style:{opacity:z}}),d.createElement(v.div,{className:h("".concat(ve,"-header-mask"),"".concat(ve,"-header-mask-right")),style:{opacity:D}}),d.createElement(v.div,{className:"".concat(ve,"-tab-list"),ref:o,scrollLeft:N,onScroll:K},d.createElement(v.div,{ref:c,className:"".concat(ve,"-tab-line"),style:{width:"fixed"===r.activeLineMode?"var(--fixed-active-line-width, 30px)":T,x:S}}),s.map((function(e){var t;return p(e.props,d.createElement("div",{key:e.key,className:h("".concat(ve,"-tab-wrapper"),n({},"".concat(ve,"-tab-wrapper-stretch"),r.stretch))},d.createElement("div",{onClick:function(){var t=e.key;e.props.disabled||null!=t&&E(t.toString())},className:h("".concat(ve,"-tab"),(t={},n(t,"".concat(ve,"-tab-active"),e.key===x),n(t,"".concat(ve,"-tab-disabled"),e.props.disabled),t))},e.props.title)))})))),s.map((function(e){if(void 0===e.props.children)return null;var t=e.key===x;return d.createElement(b,{key:e.key,active:t,forceRender:e.props.forceRender,destroyOnClose:e.props.destroyOnClose},d.createElement("div",{className:"".concat(ve,"-content"),style:{display:t?"block":"none"}},e.props.children))}))))}),{Tab:function(){return null}}),ye=T("cookie");function ge(e){var t=(new Date).getTime();return L({url:"/user/playlist",data:r({timestamp:t,cookie:ye},e)})}var we=i.exports.memo((function(e){var t=e.loadImg,r=void 0===t?D:t,n=e.imgSrc;return d.createElement(d.Fragment,null,d.createElement(z,{placeholder:d.createElement("img",{width:"100%",height:"100%",src:r,alt:"musicLoad"})},d.createElement("img",{src:n,width:"100%",height:"100%",alt:"music"})))}));t("default",d.memo((function(){i.exports.useEffect((function(){s()}),[]);var t=w((function(e){return e.login})),n=t.userInfo,o=t.loginStates,c=g(),l=y(),u=function(){var e=y(),t=g();w((function(e){return e.login}));var r=a(i.exports.useState(!1),2),n=r[0],o=r[1];i.exports.useEffect((function(){c()}),[]),i.exports.useEffect((function(){if(n){var t=x("profile");if("undefined"===t)return;e(E({userId:t.userId,nickname:t.nickname,avatarUrl:t.avatarUrl,vipType:t.vipType}))}}),[n]);var c=function(){void 0!==k.get("cookie")?(e(O(!0)),o(!0)):(S.show({position:"top",content:"用户还没有登录，请登录！"}),e(O(!1)),t("/login"))};return{loginCheck:c}}(),s=u.loginCheck,f=n.userId,m=a(i.exports.useState([]),2),p=m[0],v=m[1],h=a(i.exports.useState([]),2),b=h[0],T=h[1],C=i.exports.useRef(),M=i.exports.useRef();i.exports.useEffect((function(){var t;return(t=regeneratorRuntime.mark((function e(){var t,n,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===f){e.next=16;break}return e.prev=1,e.next=4,i={uid:f,type:1},o=void 0,o=(new Date).getTime(),L({url:"/user/record",data:r({timestamp:o},i)});case 4:return t=e.sent,e.next=7,ge({uid:f});case 7:n=e.sent,a=n.playlist,v(a),T(t.weekData),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}var i,o}),e,null,[[1,13]])})),function(){var r=this,n=arguments;return new Promise((function(a,i){var o=t.apply(r,n);function c(t){e(o,a,i,c,l,"next",t)}function l(t){e(o,a,i,c,l,"throw",t)}c(void 0)}))})(),function(){v([]),T([])}}),[f]),i.exports.useEffect((function(){var e;0!==p.length&&(null===(e=C.current)||void 0===e||e.refresh())}),[p]);return d.createElement("div",{className:"userInfoWrapper"},d.createElement(j,{title:"个人中心",onClose:function(){c("/")}}),o?d.createElement("div",{className:"userInfoContainer"},d.createElement("section",{className:"userInfoHeader"},d.createElement(A,{src:"".concat(n.avatarUrl,"?param=150y150"),width:64,height:64,style:{borderRadius:32}}),d.createElement("h1",null,n.nickname)),d.createElement("section",{className:"userTab"},d.createElement(be,null,d.createElement(be.Tab,{title:"收藏歌单",key:"fruits"},d.createElement("div",{className:"collectionList"},d.createElement(I,{bounceTop:!0,ref:C,onScroll:U},d.createElement("div",{ref:M},d.createElement(d.Fragment,null,p.length?null==p?void 0:p.map((function(e,t){if(0!==t)return d.createElement("div",{key:t,className:"collectionListItem",onClick:function(){return c("/album/".concat(e.id))}},d.createElement("div",{className:"img_wrapper"},d.createElement(we,{imgSrc:"".concat(e.coverImgUrl,"?param=50y50"),loadImg:D})),d.createElement("p",null,e.name))})):null))))),d.createElement(be.Tab,{title:"最近播放",key:"animals"},d.createElement("div",{className:"collectionList"},d.createElement(I,null,d.createElement("div",null,d.createElement(d.Fragment,null,b.length&&b.map((function(e,t){return d.createElement("div",{key:e.song.id+""+t,className:"collectionListItem",onClick:function(t){return r=Number(e.song.id),void l(N(r));var r}},d.createElement("div",{className:"img_wrapper"},d.createElement(A,{src:"".concat(e.song.al.picUrl,"?param=50y50"),lazy:!0})),d.createElement("p",null,e.song.name))})))))))))):null)})))}}}))}();
//# sourceMappingURL=index-legacy.08d67542.js.map
